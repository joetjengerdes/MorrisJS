<!DOCTYPE html>
<html>

<head>
   <meta charset="utf-8">
   <title>MÃ¼hle</title>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
   <style>
      body {
         padding: 0;
         margin: 0;
         overflow: hidden;
      }

      #wrapper {
         height: 100%;
         width: 100%;
      }

      #tutorial {
         display: block;
         margin: auto;
         border: 1px solid black;
         background-image: url('assets/img/bg.jpg');
         background-size: cover;
      }
   </style>

   <script>
      var circleSize = 10;
      var spaceBetween = 100;
      var lineWidth = 3;
      var circleColor = "rgb(0,0,0)";
      var leftOffset = 0;
      var edges = [];

      $(document).ready(function() {
         var canvas = document.getElementById("tutorial");

         canvas.width = document.body.clientWidth; //document.width is obsolete
         canvas.height = Math.max(window.innerHeight, document.body.clientHeight);

         var h = canvas.height;
         var w = canvas.height;


         spaceBetween = (h + w) / 12;
         circleSize = (h + w) / 180;
         lineWidth = (h + w) / 350;
         if (circleSize < 1) {
            circleSize = 1
         };
         leftOffset = (canvas.width - h) / 2;

         var ctx = canvas.getContext("2d");
         drawField(ctx, h, w);

         var len = edges.length;
         for (i = 0; i < len; i++) {
            edges[i].draw(ctx);
         }


         canvas.addEventListener('click', function(e) {
            var mouse = getMouse(e);
            var x = mouse.x;
            var y = mouse.y;

            for (i = 0; i < len; i++) {
               if (edges[i].contains(x, y)) {
                  //alert("EDGE: "+edges[i].x + " " + edges[i].y);
                  var e = new Edge(edges[i].x, edges[i].y, circleSize * 4)
                  e.fill = 'rgb(255,0,0)';
                  e.draw(ctx);
               }
            }


         });

         //return relative position to canvas
         function getMouse(evt) {
            var rect = canvas.getBoundingClientRect();
            return {
               x: evt.clientX - rect.left,
               y: evt.clientY - rect.top
            };
         }


      });



      function Edge(x, y, circleSize) {
         this.x = x;
         this.y = y;
         this.circleSize = circleSize;
         this.fill = '#000000';
         this.playerID = 0;
      }

      Edge.prototype.draw = function(ctx) {
         ctx.fillStyle = this.fill;
         ctx.beginPath();
         ctx.arc(this.x, this.y, this.circleSize, 0, Math.PI * 2, true);
         ctx.closePath();
         ctx.fill();
      }

      Edge.prototype.contains = function(mx, my) {
         var factor = 4;
         if ((this.x - this.circleSize * factor) < mx && (this.x + this.circleSize * factor) > mx) {
            if ((this.y - this.circleSize * factor) <= my && (this.y + this.circleSize * factor) >= my) {
               return true;
            }
         }
         return false;
      }
   </script>
</head>

<body onload>
   <div id="wrapper">
      <canvas id="tutorial" width="600" height="600"></canvas>
   </div>
   <!--<audio autoplay="true">
      <source src="assets/music/bg.mp3" type="audio/mpeg" />
   </audio>-->
</body>

</html>
